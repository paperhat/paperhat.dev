<Schema
	id=codex:view:adaptive-intent
	version="1.0.0"
	versionScheme=$Semver
	authoringMode=$SimplifiedMode
	compatibilityClass=$Initial
	namespace="adaptive-intent"
	title="Adaptive Intent Schema"
	description="Binds composition scope, context profile, objective profile, optimization profile, override set, policy set, and foundry target into one deterministic evaluation request."
>
	<ConceptDefinitions>
		<ConceptDefinition
			id=codex:view:adaptive-intent:AdaptiveIntent
			name="AdaptiveIntent"
			conceptKind=$Semantic
			entityEligibility=$MustNotBeEntity
		>
			<ContentRules>
				<ForbidsContent />
			</ContentRules>

				<TraitRules>
					<RequiresTrait name="intentId" />

				<RequiresTrait name="compositionRef" />

				<RequiresTrait name="contextProfileRef" />

					<RequiresTrait name="objectiveProfileRef" />

					<RequiresTrait name="optimizationProfileRef" />

				<AllowsTrait name="overrideSetRef" />

				<RequiresTrait name="policySetRef" />

				<RequiresTrait name="targetFoundry" />

				<AllowsTrait name="viewRef" />
			</TraitRules>
		</ConceptDefinition>
	</ConceptDefinitions>

	<TraitDefinitions>
		<TraitDefinition
			name="intentId"
			defaultValueType=$IriReference
			cardinality=$Single
			isReferenceTrait=true
		/>

		<TraitDefinition
			name="compositionRef"
			defaultValueType=$IriReference
			cardinality=$Single
			isReferenceTrait=true
		/>

		<TraitDefinition
			name="contextProfileRef"
			defaultValueType=$IriReference
			cardinality=$Single
			isReferenceTrait=true
		/>

		<TraitDefinition
			name="objectiveProfileRef"
			defaultValueType=$IriReference
			cardinality=$Single
			isReferenceTrait=true
		/>

		<TraitDefinition
			name="optimizationProfileRef"
			defaultValueType=$IriReference
			cardinality=$Single
			isReferenceTrait=true
		/>

		<TraitDefinition
			name="overrideSetRef"
			defaultValueType=$IriReference
			cardinality=$Single
			isReferenceTrait=true
		/>

		<TraitDefinition
			name="policySetRef"
			defaultValueType=$IriReference
			cardinality=$Single
			isReferenceTrait=true
		/>

		<TraitDefinition
			name="viewRef"
			defaultValueType=$IriReference
			cardinality=$Single
			isReferenceTrait=true
		/>

		<TraitDefinition
			name="targetFoundry"
			defaultValueType=$EnumeratedToken
			cardinality=$Single
		>
			<AllowedValues>
				<ValueIsOneOf values=[ $web, $app, $pdf, $epub, $print ] />
			</AllowedValues>
		</TraitDefinition>
	</TraitDefinitions>
</Schema>
