@prefix wd: <https://paperhat.dev/ns/wd#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

#####################################################################
# Composition
#####################################################################

wd:CompositionShape
  a sh:NodeShape ;
  sh:targetClass wd:Composition ;

  sh:property [
    sh:path wd:hasCanvas ;
    sh:minCount 1 ; sh:maxCount 1 ;
    sh:class wd:Canvas ;
  ] ;

  sh:property [
    sh:path wd:hasElement ;
    sh:minCount 1 ;
    sh:class wd:ElementInstance ;
  ] ;

  sh:property [
    sh:path wd:intent ;
    sh:minCount 1 ; sh:maxCount 1 ;
    sh:class wd:CommunicativeIntent ;
  ] .

#####################################################################
# ElementInstance
#####################################################################

wd:ElementInstanceShape
  a sh:NodeShape ;
  sh:targetClass wd:ElementInstance ;

  sh:property [
    sh:path wd:instanceOf ;
    sh:minCount 1 ; sh:maxCount 1 ;
    sh:class wd:ElementType ;
  ] ;

  sh:property [
    sh:path wd:frame ;
    sh:minCount 1 ; sh:maxCount 1 ;
    sh:class wd:Rect ;
  ] ;

  sh:property [
    sh:path wd:style ;
    sh:minCount 1 ; sh:maxCount 1 ;
    sh:class wd:Style ;
  ] ;

  sh:property [
    sh:path wd:semanticRole ;
    sh:minCount 1 ; sh:maxCount 1 ;
    sh:class wd:Role ;
  ] ;

  sh:property [
    sh:path wd:zIndex ;
    sh:minCount 1 ; sh:maxCount 1 ;
    sh:datatype xsd:integer ;
  ] .

#####################################################################
# Rect
#####################################################################

wd:RectShape
  a sh:NodeShape ;
  sh:targetClass wd:Rect ;

  sh:property [
    sh:path wd:x ;
    sh:minCount 1 ; sh:maxCount 1 ;
    sh:datatype xsd:decimal ;
  ] ;

  sh:property [
    sh:path wd:y ;
    sh:minCount 1 ; sh:maxCount 1 ;
    sh:datatype xsd:decimal ;
  ] ;

  sh:property [
    sh:path wd:w ;
    sh:minCount 1 ; sh:maxCount 1 ;
    sh:datatype xsd:decimal ;
    sh:minExclusive 0 ;
  ] ;

  sh:property [
    sh:path wd:h ;
    sh:minCount 1 ; sh:maxCount 1 ;
    sh:datatype xsd:decimal ;
    sh:minExclusive 0 ;
  ] .

#####################################################################
# Style / Paint / Stroke / Typography
#####################################################################

wd:StyleShape
  a sh:NodeShape ;
  sh:targetClass wd:Style ;

  sh:property [
    sh:path wd:opacity ;
    sh:minCount 1 ; sh:maxCount 1 ;
    sh:datatype xsd:decimal ;
    sh:minInclusive 0 ;
    sh:maxInclusive 1 ;
  ] ;

  sh:property [
    sh:path wd:fill ;
    sh:maxCount 1 ;
    sh:class wd:Paint ;
  ] ;

  sh:property [
    sh:path wd:stroke ;
    sh:maxCount 1 ;
    sh:class wd:Stroke ;
  ] ;

  sh:property [
    sh:path wd:typeStyle ;
    sh:maxCount 1 ;
    sh:class wd:TypographicStyle ;
  ] .

wd:PaintShape
  a sh:NodeShape ;
  sh:targetClass wd:Paint ;

  sh:property [
    sh:path wd:paintKind ;
    sh:minCount 1 ; sh:maxCount 1 ;
    sh:datatype xsd:string ;
  ] ;

  sh:property [
    sh:path wd:paintValue ;
    sh:minCount 1 ; sh:maxCount 1 ;
    sh:datatype xsd:string ;
  ] .

wd:StrokeShape
  a sh:NodeShape ;
  sh:targetClass wd:Stroke ;

  sh:property [
    sh:path wd:strokeWidth ;
    sh:minCount 1 ; sh:maxCount 1 ;
    sh:datatype xsd:decimal ;
    sh:minInclusive 0 ;
  ] .

wd:TypographicStyleShape
  a sh:NodeShape ;
  sh:targetClass wd:TypographicStyle ;

  sh:property [
    sh:path wd:typeface ;
    sh:minCount 1 ; sh:maxCount 1 ;
    sh:class wd:Typeface ;
  ] ;

  sh:property [
    sh:path wd:fontSize ;
    sh:minCount 1 ; sh:maxCount 1 ;
    sh:datatype xsd:decimal ;
    sh:minExclusive 0 ;
  ] ;

  sh:property [
    sh:path wd:fontWeight ;
    sh:minCount 1 ; sh:maxCount 1 ;
    sh:datatype xsd:integer ;
    sh:minInclusive 1 ;
  ] ;

  sh:property [
    sh:path wd:leading ;
    sh:minCount 1 ; sh:maxCount 1 ;
    sh:datatype xsd:decimal ;
    sh:minExclusive 0 ;
  ] ;

  sh:property [
    sh:path wd:tracking ;
    sh:maxCount 1 ;
    sh:datatype xsd:decimal ;
  ] .

#####################################################################
# PrincipleStatement
#####################################################################

wd:PrincipleStatementShape
  a sh:NodeShape ;
  sh:targetClass wd:PrincipleStatement ;

  sh:property [
    sh:path wd:principleType ;
    sh:minCount 1 ; sh:maxCount 1 ;
    sh:class wd:Principle ;
  ] ;

  sh:property [
    sh:path wd:scope ;
    sh:minCount 1 ; sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path wd:participant ;
    sh:minCount 1 ;
    sh:class wd:ElementInstance ;
  ] .
