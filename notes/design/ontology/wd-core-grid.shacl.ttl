@prefix wd: <https://paperhat.dev/ns/wd#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

#####################################################################
# Grid constraints (only defined here; not duplicated elsewhere)
#####################################################################

wd:GridSystemShape
  a sh:NodeShape ;
  sh:targetClass wd:GridSystem ;

  sh:property [
    sh:path wd:columnCount ;
    sh:minCount 1 ; sh:maxCount 1 ;
    sh:datatype xsd:integer ;
    sh:minInclusive 1 ;
  ] ;

  sh:property [
    sh:path wd:rowCount ;
    sh:minCount 1 ; sh:maxCount 1 ;
    sh:datatype xsd:integer ;
    sh:minInclusive 1 ;
  ] ;

  sh:property [
    sh:path wd:baselineGrid ;
    sh:maxCount 1 ;
    sh:class wd:BaselineGrid ;
  ] ;

  sh:property [
    sh:path wd:hasUnit ;
    sh:class wd:GridUnit ;
  ] .

wd:GridUnitShape
  a sh:NodeShape ;
  sh:targetClass wd:GridUnit ;
  sh:xone (
    [ sh:class wd:ColumnUnit ]
    [ sh:class wd:RowUnit ]
    [ sh:class wd:GutterUnit ]
  ) .

wd:BaselineGridShape
  a sh:NodeShape ;
  sh:targetClass wd:BaselineGrid ;

  sh:property [
    sh:path wd:baselineStep ;
    sh:minCount 1 ; sh:maxCount 1 ;
    sh:datatype xsd:decimal ;
    sh:minExclusive 0 ;
  ] .
